<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <title>Ch06 WebGL2 예제</title>
</head>
<body>
<h1>Ch06 예제</h1>
<div alt="본문" style="margin: 0 30px">
<h3>Vertex Attributes</h3>
<p>모든 OpenGL ES 3.0 의 구현채는 적어도 16개의 vertex attributes 를 지원합니다.</p>
<div style="padding: 10px 10px 20px 20px">
<h5>OpenGL ES 3.0</h5>
    <div class="colorscripter-code" style="color:#f0f0f0;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important;overflow:auto"><table class="colorscripter-code-table" style="margin:0;padding:0;border:none;background-color:#272727;border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px;border-right:2px solid #4f4f4f"><div style="margin:0;padding:0;word-break:normal;text-align:right;color:#aaa;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%"><div style="line-height:130%">1</div><div style="line-height:130%">2</div></div></td><td style="padding:6px 0;text-align:left"><div style="margin:0;padding:0;color:#f0f0f0;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">GLint&nbsp;maxVertexAttribs;&nbsp;<span style="color:#999999">//&nbsp;반드시&nbsp;16보다는&nbsp;커야합니다.</span></div><div style="background-color:#303030; padding:0 6px; white-space:pre; line-height:130%">glGetIntegerv(GL_MAX_VERTEX_ATTRIBS,&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">&amp;</span>maxVertexAttribs);&nbsp;</div></div></td><td style="vertical-align:bottom;padding:0 2px 4px 0"><a href="http://colorscripter.com/info#e" target="_blank" style="text-decoration:none;color:white"><span style="font-size:9px;word-break:normal;background-color:#4f4f4f;color:white;border-radius:10px;padding:1px">cs</span></a></td></tr></table></div>
<h5>webGl2</h5>
<div class="colorscripter-code" style="color:#f0f0f0;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important;overflow:auto"><table class="colorscripter-code-table" style="margin:0;padding:0;border:none;background-color:#272727;border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px;border-right:2px solid #4f4f4f"><div style="margin:0;padding:0;word-break:normal;text-align:right;color:#aaa;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%"><div style="line-height:130%">1</div><div style="line-height:130%">2</div></div></td><td style="padding:6px 0;text-align:left"><div style="margin:0;padding:0;color:#f0f0f0;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">const</span>&nbsp;gl:WebGLRenderingContext&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;getGL2(document.createElement(<span style="color:#ffd500">"canvas"</span>));</div><div style="background-color:#303030; padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">const</span>&nbsp;maxVertexAttribs:number&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;gl.getParameter(gl.MAX_VERTEX_ATTRIBS);</div></div></td><td style="vertical-align:bottom;padding:0 2px 4px 0"><a href="http://colorscripter.com/info#e" target="_blank" style="text-decoration:none;color:white"><span style="font-size:9px;word-break:normal;background-color:#4f4f4f;color:white;border-radius:10px;padding:1px">cs</span></a></td></tr></table></div>
</div>
<button onclick="checkMaxVertexAttribs()">최대 vertex attributes 개수 확인하기</button>
<h3>Const Vertex Attribute</h3>
<p>glVertexAttrib4f 를 사용해 삼각형의 색상을 결정하는 예제입니다.
    <br/>Color Picker 를 사용해 색상을 변경할 수 있습니다.
</p>
<div style="padding: 10px 10px 20px 20px;display: flex;flex-direction: row;justify-content: center;">
    <div style="display: flex; flex-direction: column; margin: 10px">
    <canvas id="constVertexAttribute" style="width:40vw; max-width: 400px; height: 40vw; max-height: 400px; align-self: center"></canvas>
    <label style="padding: 10px"> Color Picker
        <input id="constVertexAttributesPicker" type="color" value="#32a852" onchange="resetColor()">
    </label>
    </div>
    <div class="colorscripter-code" style="color:#f0f0f0;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important;overflow:auto"><table class="colorscripter-code-table" style="margin:0;padding:0;border:none;background-color:#272727;border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px;border-right:2px solid #4f4f4f"><div style="margin:0;padding:0;word-break:normal;text-align:right;color:#aaa;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%"><div style="line-height:130%">1</div><div style="line-height:130%">2</div><div style="line-height:130%">3</div><div style="line-height:130%">4</div><div style="line-height:130%">5</div><div style="line-height:130%">6</div><div style="line-height:130%">7</div><div style="line-height:130%">8</div><div style="line-height:130%">9</div><div style="line-height:130%">10</div><div style="line-height:130%">11</div><div style="line-height:130%">12</div><div style="line-height:130%">13</div><div style="line-height:130%">14</div><div style="line-height:130%">15</div><div style="line-height:130%">16</div><div style="line-height:130%">17</div><div style="line-height:130%">18</div><div style="line-height:130%">19</div><div style="line-height:130%">20</div><div style="line-height:130%">21</div><div style="line-height:130%">22</div><div style="line-height:130%">23</div><div style="line-height:130%">24</div><div style="line-height:130%">25</div><div style="line-height:130%">26</div><div style="line-height:130%">27</div><div style="line-height:130%">28</div><div style="line-height:130%">29</div><div style="line-height:130%">30</div><div style="line-height:130%">31</div><div style="line-height:130%">32</div><div style="line-height:130%">33</div><div style="line-height:130%">34</div><div style="line-height:130%">35</div><div style="line-height:130%">36</div><div style="line-height:130%">37</div><div style="line-height:130%">38</div><div style="line-height:130%">39</div><div style="line-height:130%">40</div><div style="line-height:130%">41</div><div style="line-height:130%">42</div><div style="line-height:130%">43</div></div></td><td style="padding:6px 0;text-align:left"><div style="margin:0;padding:0;color:#f0f0f0;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">function</span>&nbsp;constVertexAttributeEx():<span style="color:#ff3399">void</span>&nbsp;{</div><div style="background-color:#303030; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;webGL2&nbsp;객체&nbsp;생성</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">const</span>&nbsp;gl:&nbsp;WebGLRenderingContext&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;getGL2(<span style="color:#4be6fa">document</span>.querySelector(<span style="color:#ffd500">"#canvasID"</span>));</div><div style="background-color:#303030; padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;vertex,&nbsp;fragment&nbsp;Shader&nbsp;생성</span></div><div style="background-color:#303030; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">const</span>&nbsp;vertexShader:&nbsp;WebGLShader&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;createShader(gl,&nbsp;gl.VERTEX_SHADER,&nbsp;vertexShaderSource);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">const</span>&nbsp;fragmentShader:&nbsp;WebGLShader&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;createShader(gl,&nbsp;gl.FRAGMENT_SHADER,&nbsp;fragmentShaderSource);</div><div style="background-color:#303030; padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;programingObj&nbsp;생성</span></div><div style="background-color:#303030; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">const</span>&nbsp;program:&nbsp;WebGLProgram&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;getProgram(gl,&nbsp;vertexShader,&nbsp;fragmentShader);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;</div><div style="background-color:#303030; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;VAO&nbsp;생성&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">const</span>&nbsp;positionBuffer:&nbsp;WebGLBuffer&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;gl.createBuffer();</div><div style="background-color:#303030; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;gl.bindBuffer(gl.ARRAY_BUFFER,&nbsp;positionBuffer);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;</div><div style="background-color:#303030; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;정점&nbsp;위치정보&nbsp;생성</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">const</span>&nbsp;vertexPos:&nbsp;number[]&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;[</div><div style="background-color:#303030; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c10aff">0</span>,&nbsp;<span style="color:#c10aff">0.</span><span style="color:#c10aff">5</span>,&nbsp;<span style="color:#c10aff">0</span>,</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">-</span><span style="color:#c10aff">0.</span><span style="color:#c10aff">5</span>,&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">-</span><span style="color:#c10aff">0.</span><span style="color:#c10aff">5</span>,&nbsp;<span style="color:#c10aff">0</span>,</div><div style="background-color:#303030; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c10aff">0.</span><span style="color:#c10aff">5</span>,&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">-</span><span style="color:#c10aff">0.</span><span style="color:#c10aff">5</span>,&nbsp;<span style="color:#c10aff">0</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;];</div><div style="background-color:#303030; padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;VAO&nbsp;에&nbsp;정보&nbsp;입력</span></div><div style="background-color:#303030; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;gl.bufferData(gl.ARRAY_BUFFER,&nbsp;<span style="color:#ff3399">new</span>&nbsp;Float32Array(vertexPos),&nbsp;gl.STATIC_DRAW);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;</div><div style="background-color:#303030; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Color&nbsp;Buffer&nbsp;초기화</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;glColorBufferInit(gl,&nbsp;<span style="color:#ffd500">"#000000"</span>);</div><div style="background-color:#303030; padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;쉐이더&nbsp;프로그램을&nbsp;사용합니다.</span></div><div style="background-color:#303030; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;gl.useProgram(program);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;</div><div style="background-color:#303030; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;vertex&nbsp;Shader&nbsp;layout(location=0)&nbsp;에&nbsp;전달</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;gl.vertexAttribPointer(<span style="color:#c10aff">0</span>,&nbsp;<span style="color:#c10aff">3</span>,&nbsp;gl.FLOAT,&nbsp;<span style="color:#c10aff">false</span>,&nbsp;<span style="color:#c10aff">0</span>,&nbsp;<span style="color:#c10aff">0</span>);</div><div style="background-color:#303030; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;버퍼의&nbsp;속성을&nbsp;활용해&nbsp;vertexAttributes&nbsp;를&nbsp;채우라고&nbsp;지시</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;gl.enableVertexAttribArray(<span style="color:#c10aff">0</span>);</div><div style="background-color:#303030; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;color&nbsp;picker&nbsp;의&nbsp;값&nbsp;가져오기</span></div><div style="background-color:#303030; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">const</span>&nbsp;{r,&nbsp;g,&nbsp;b}&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;hexToRgb(color);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="background-color:#303030; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;vertex&nbsp;Shader&nbsp;layout(location=1)&nbsp;에&nbsp;전달</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;gl.vertexAttrib4f(<span style="color:#c10aff">1</span>,&nbsp;r,&nbsp;g,&nbsp;b,&nbsp;<span style="color:#c10aff">1</span>);</div><div style="background-color:#303030; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;gl.drawArrays(gl.TRIANGLES,&nbsp;<span style="color:#c10aff">0</span>,&nbsp;<span style="color:#c10aff">3</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%">}</div></div><div style="text-align:right;margin-top:-13px;margin-right:5px;font-size:9px;font-style:italic"><a href="http://colorscripter.com/info#e" target="_blank" style="color:#4f4f4ftext-decoration:none">Colored by Color Scripter</a></div></td><td style="vertical-align:bottom;padding:0 2px 4px 0"><a href="http://colorscripter.com/info#e" target="_blank" style="text-decoration:none;color:white"><span style="font-size:9px;word-break:normal;background-color:#4f4f4f;color:white;border-radius:10px;padding:1px">cs</span></a></td></tr></table></div>
</div>
</div>
</body>
<script src="app.js"></script>
</html>